{"ast":null,"code":"var _jsxFileName = \"/Users/manhhaihust/Desktop/project44/Project-3/src/components/admin/ProductFunc.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Form, FormGroup, Input, Label, Button } from 'reactstrap';\nimport { Redirect } from 'react-router-dom';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCloudUploadAlt, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport '../../css/admin/ProductFunc.css';\nimport callApi from '../../utils/apiCaller';\n\nclass ProductFunc extends Component {\n  constructor(pros) {\n    super(pros);\n\n    this.validateFn = (input = '', info = '') => {\n      if (!input) {\n        return `The ${info} field is required.`;\n      }\n\n      if (info !== 'price' && info !== 'category') {\n        if (input.length < 6) {\n          return `${info.charAt(0).toUpperCase() + info.slice(1)} must be at least 5 characters.`;\n        }\n      }\n\n      return '';\n    };\n\n    this.validate = (name, price, des, category, author) => {\n      const nameErr = this.validateFn(name, 'name') || '';\n      const priceErr = this.validateFn(price, 'price') || '';\n      const desErr = this.validateFn(des, 'des') || '';\n      const categoryErr = this.validateFn(category, 'category') || '';\n      const authorErr = this.validateFn(author, 'author') || '';\n\n      if (nameErr || priceErr || desErr || categoryErr || authorErr) {\n        this.setState({\n          nameErr: nameErr,\n          priceErr: priceErr,\n          desErr: desErr,\n          categoryErr: categoryErr,\n          authorErr: authorErr\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this.handleClick = () => {\n      this.props.onCloseFormProduct();\n      this.props.onResetProductUpdate();\n    };\n\n    this.isEmpty = obj => {\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) return false;\n      }\n\n      return true;\n    };\n\n    this.handleChange = e => {\n      let target = e.target;\n      let name = target.name;\n      let value = target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleImage = async e => {\n      let target = e.target; // let name = target.name\n\n      let file = target.files[0]; // console.log(file)\n      // console.log(this.state.fileImg)\n\n      const formData = new FormData();\n      console.log(formData);\n      formData.append('image', file, file.name // this.state.fileImg.name\n      );\n      const res = await callApi('api/upload/post', 'POST', formData); // console.log(res.data.url_img)\n\n      if (res) {\n        if (this.state.img) {\n          this.setState({\n            url_img: res.data.url_img,\n            img: ''\n          });\n        }\n\n        this.setState({\n          url_img: res.data.url_img\n        });\n      }\n    };\n\n    this.handleClickCreateOrUpdateProduct = async e => {\n      e.preventDefault();\n      let {\n        _id,\n        name,\n        price,\n        des,\n        category,\n        author,\n        url_img,\n        img\n      } = this.state;\n      let isValidate = this.validate(name, price, des, category, author);\n      console.log(isValidate);\n\n      if (_id) {\n        let data = {\n          _id: _id,\n          name: name,\n          price: price,\n          des: des,\n          category: category,\n          author: author,\n          img: url_img ? url_img : img\n        };\n\n        if (isValidate) {\n          this.props.onUpdateProduct(data); // update product\n\n          this.props.onResetProductUpdate();\n        }\n      } else {\n        let data = {\n          name: name,\n          price: price,\n          des: des,\n          category: category,\n          author: author,\n          img: url_img\n        };\n\n        if (isValidate) {\n          this.props.onAddProduct(data); // add product\n        }\n      }\n    };\n\n    this.state = {\n      _id: '',\n      name: '',\n      price: '',\n      img: '',\n      des: '',\n      category: 'Children Literature',\n      author: '',\n      url_img: '',\n      // isClick: false,\n      nameErr: '',\n      priceErr: '',\n      desErr: '',\n      categoryErr: '',\n      authorErr: '',\n      err: ''\n    };\n  }\n\n  componentDidMount() {\n    let {\n      productEditing\n    } = this.props;\n    let isProductEditing = this.isEmpty(productEditing); // console.log(productEditing)\n    // console.log(isProductEditing)\n\n    if (isProductEditing) {\n      this.setState({\n        category: 'Children Literature'\n      });\n    } else {\n      this.setState({\n        _id: productEditing._id,\n        name: productEditing.name,\n        price: productEditing.price,\n        des: productEditing.des,\n        img: productEditing.img,\n        author: productEditing.author,\n        category: productEditing.category\n      });\n    }\n  } // static getDerivedStateFromProps(nextProps, prevState) {\n  //     console.log(nextProps)\n  //     console.log(prevState)\n  //     const isEmpty = (obj) => {\n  //         for (var key in obj) {\n  //             if (obj.hasOwnProperty(key))\n  //                 return false;\n  //         }\n  //         return true;\n  //     }\n  //     let { productEditing } = nextProps\n  //     // console.log(productEditing)\n  //     if (isEmpty(productEditing)) {\n  //         return prevState\n  //     }\n  //     // if(JSON.stringify(productEditing) !== JSON.stringify(prevState)) {\n  //     //     return prevState\n  //     // }\n  //     // if(!isEmpty(productEditing)) {\n  //     //     if(JSON.stringify(productEditing) !== JSON.stringify(prevState)) {\n  //     //         return \n  //     //     }\n  //     // }\n  //     else {\n  //         return {\n  //             _id: productEditing._id,\n  //             name: productEditing.name,\n  //             price: productEditing.price,\n  //             des: productEditing.des,\n  //             img: productEditing.img,\n  //             author: productEditing.author,\n  //             category: productEditing.category\n  //         }\n  //     }\n  // }\n\n\n  render() {\n    let {\n      isOpenFormProduct,\n      productEditing,\n      onCloseFormProduct,\n      isClick\n    } = this.props;\n    let {\n      name,\n      price,\n      des,\n      category,\n      author,\n      url_img,\n      img,\n      // isClick,\n      nameErr,\n      priceErr,\n      desErr,\n      categoryErr,\n      authorErr\n    } = this.state;\n    const categoryList = [{\n      name: 'Children Literature'\n    }, {\n      name: 'Comic Book'\n    }, {\n      name: 'Fantasy'\n    }, {\n      name: 'Horror'\n    }, {\n      name: 'Novel'\n    }, {\n      name: 'Romantic'\n    }, {\n      name: 'Science Fiction'\n    }, {\n      name: 'Thriller'\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: isOpenFormProduct ? \"ProductFuncBackground update-active\" : \"ProductFuncBackground\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      className: isOpenFormProduct ? \"ProductFunc update-active\" : \"ProductFunc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      style: {\n        position: \"fixed\",\n        top: \"0\",\n        width: \"100%\",\n        left: \"0\",\n        right: \"0\",\n        margin: \"0\",\n        padding: \"50px 35px 0 70px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"d-flex justify-content-between p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"bt-header mb-5\",\n      style: {\n        fontSize: \"18px\",\n        color: \"rgb(22,31,106)\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 29\n      }\n    }, this.isEmpty(productEditing) ? 'Add Product' : 'Update Product'), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTimes,\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(Form, {\n      style: {\n        height: '100%',\n        overflow: 'scroll'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"mb-5 w-100 m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xl: \"4\",\n      style: {\n        padding: \"30px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"product-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 33\n      }\n    }, \"Upload your Product image here\")), /*#__PURE__*/React.createElement(Col, {\n      xl: \"8\",\n      className: \"product-background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      id: \"file\",\n      type: \"file\",\n      accept: \"image/*\",\n      name: \"fileImg\",\n      onChange: this.handleImage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Label, {\n      for: \"file\",\n      className: \"input-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCloudUploadAlt,\n      size: \"2x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 45\n      }\n    }, \"Drag/Upload \"), \"your image here.\")), img && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: productEditing.img,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 45\n      }\n    })), url_img && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: url_img,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 45\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      className: \"w-100 m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xl: \"4\",\n      style: {\n        padding: \"30px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"product-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 33\n      }\n    }, \"Add your Product description and necessary information from here\")), /*#__PURE__*/React.createElement(Col, {\n      className: \"product-background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"update-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      className: \"product-label\",\n      for: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 37\n      }\n    }, \"Name\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-1 text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 41\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(Input, {\n      autoComplete: \"off\",\n      className: \"product-form-control\",\n      id: \"name\",\n      type: \"text\",\n      name: \"name\",\n      onChange: this.handleChange // value={productEditing.name ? productEditing.name : name}\n      ,\n      value: name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 37\n      }\n    }), nameErr && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"validation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 49\n      }\n    }, nameErr)), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"update-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      className: \"product-label\",\n      for: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 37\n      }\n    }, \"Description\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-1 text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 41\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      // value={productEditing.des ? productEditing.des : des}\n      value: des,\n      className: \"product-form-control\",\n      id: \"description\",\n      type: \"text\",\n      name: \"des\",\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 41\n      }\n    })), desErr && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"validation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 48\n      }\n    }, desErr)), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"update-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      className: \"product-label\",\n      for: \"price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 37\n      }\n    }, \"Price\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-1 text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 41\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(Input, {\n      autoComplete: \"off\",\n      className: \"product-form-control\",\n      id: \"price\",\n      type: \"number\",\n      name: \"price\",\n      onChange: this.handleChange // value={productEditing.price ? productEditing.price : price}\n      ,\n      value: price,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 37\n      }\n    }), priceErr && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"validation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 50\n      }\n    }, priceErr)), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"update-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      className: \"product-label\",\n      for: \"author\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 37\n      }\n    }, \"Author\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-1 text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 41\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(Input, {\n      autoComplete: \"off\",\n      className: \"product-form-control\",\n      id: \"author\",\n      type: \"text\",\n      name: \"author\",\n      onChange: this.handleChange // value={productEditing.author ? productEditing.author : author} \n      ,\n      value: author,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 37\n      }\n    }), authorErr && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"validation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 51\n      }\n    }, authorErr)), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"update-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      className: \"product-label\",\n      for: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 37\n      }\n    }, \"Category\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-1 text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 41\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(Input, {\n      autoComplete: \"off\",\n      className: \"product-form-control\",\n      id: \"category\",\n      type: \"select\",\n      name: \"category\",\n      onChange: this.handleChange,\n      value: category // value={productEditing.category ? productEditing.category : category}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 37\n      }\n    }, this.props.category.map(category => /*#__PURE__*/React.createElement(\"option\", {\n      key: category.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 78\n      }\n    }, category.name))), categoryErr && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"validation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 53\n      }\n    }, categoryErr)))), /*#__PURE__*/React.createElement(Row, {\n      className: \"update-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"p-0 cancle-btn w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"w-100\",\n      onClick: onCloseFormProduct,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 33\n      }\n    }, \"Cancel\")), /*#__PURE__*/React.createElement(Col, {\n      className: \"p-0 submit-btn w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"w-100\",\n      type: \"submit\",\n      onClick: this.handleClickCreateOrUpdateProduct,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 33\n      }\n    }, this.isEmpty(productEditing) ? 'Create Product' : 'Update Product'))))));\n  }\n\n}\n\nexport default ProductFunc;","map":{"version":3,"sources":["/Users/manhhaihust/Desktop/project44/Project-3/src/components/admin/ProductFunc.js"],"names":["React","Component","Container","Row","Col","Form","FormGroup","Input","Label","Button","Redirect","FontAwesomeIcon","faCloudUploadAlt","faTimes","callApi","ProductFunc","constructor","pros","validateFn","input","info","length","charAt","toUpperCase","slice","validate","name","price","des","category","author","nameErr","priceErr","desErr","categoryErr","authorErr","setState","handleClick","props","onCloseFormProduct","onResetProductUpdate","isEmpty","obj","key","hasOwnProperty","handleChange","e","target","value","handleImage","file","files","formData","FormData","console","log","append","res","state","img","url_img","data","handleClickCreateOrUpdateProduct","preventDefault","_id","isValidate","onUpdateProduct","onAddProduct","err","componentDidMount","productEditing","isProductEditing","render","isOpenFormProduct","isClick","categoryList","position","top","width","left","right","margin","padding","fontSize","color","height","overflow","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Container, Row, Col, Form, FormGroup, Input, Label, Button } from 'reactstrap'\nimport { Redirect } from 'react-router-dom'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCloudUploadAlt, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport '../../css/admin/ProductFunc.css'\nimport callApi from '../../utils/apiCaller'\n\nclass ProductFunc extends Component {\n    constructor(pros) {\n        super(pros)\n        this.state = {\n            _id: '',\n            name: '',\n            price: '',\n            img: '',\n            des: '',\n            category: 'Children Literature',\n            author: '',\n            url_img: '',\n            // isClick: false,\n            nameErr: '',\n            priceErr: '',\n            desErr: '',\n            categoryErr: '',\n            authorErr: '',\n            err: ''\n        }\n    }\n\n    validateFn = (input = '', info = '') => {\n        if (!input) {\n            return `The ${info} field is required.`\n        }\n        if (info !== 'price' && info !== 'category') {\n            if (input.length < 6) {\n                return `${info.charAt(0).toUpperCase() + info.slice(1)} must be at least 5 characters.`\n            }\n        }\n\n        return '';\n    }\n\n    validate = (name, price, des, category, author) => {\n        const nameErr = this.validateFn(name, 'name') || '';\n        const priceErr = this.validateFn(price, 'price') || '';\n        const desErr = this.validateFn(des, 'des') || '';\n        const categoryErr = this.validateFn(category, 'category') || '';\n        const authorErr = this.validateFn(author, 'author') || '';\n        if (nameErr || priceErr || desErr || categoryErr || authorErr) {\n            this.setState({\n                nameErr: nameErr,\n                priceErr: priceErr,\n                desErr: desErr,\n                categoryErr: categoryErr,\n                authorErr: authorErr\n            })\n            return false\n        }\n        return true\n    }\n\n\n    handleClick = () => {\n        this.props.onCloseFormProduct()\n        this.props.onResetProductUpdate()\n    }\n\n    isEmpty = (obj) => {\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key))\n                return false;\n        }\n        return true;\n    }\n\n    handleChange = (e) => {\n        let target = e.target\n        let name = target.name\n        let value = target.value\n        this.setState({\n            [name]: value\n        })\n    }\n\n    handleImage = async (e) => {\n        let target = e.target\n        // let name = target.name\n        let file = target.files[0]\n        // console.log(file)\n        // console.log(this.state.fileImg)\n        const formData = new FormData();\n        console.log(formData)\n        formData.append(\n            'image',\n            file,\n            file.name\n            // this.state.fileImg.name\n        );\n\n        const res = await callApi('api/upload/post', 'POST', formData)\n        // console.log(res.data.url_img)\n        if (res) {\n            if (this.state.img) {\n                this.setState({\n                    url_img: res.data.url_img,\n                    img: ''\n                })\n            }\n            this.setState({\n                url_img: res.data.url_img\n            })\n        }\n    }\n\n    handleClickCreateOrUpdateProduct = async (e) => {\n        e.preventDefault()\n        let { _id, name, price, des, category, author, url_img, img } = this.state\n        let isValidate = this.validate(name, price, des, category, author)\n        console.log(isValidate)\n        if (_id) {\n            let data = {\n                _id: _id,\n                name: name,\n                price: price,\n                des: des,\n                category: category,\n                author: author,\n                img: url_img ? url_img : img\n            }\n            if (isValidate) {\n                this.props.onUpdateProduct(data) // update product\n                this.props.onResetProductUpdate()\n            }\n        }\n        else {\n            let data = {\n                name: name,\n                price: price,\n                des: des,\n                category: category,\n                author: author,\n                img: url_img\n            }\n            if (isValidate) {\n                this.props.onAddProduct(data) // add product\n            }\n        }\n    }\n\n    componentDidMount() {\n        let { productEditing } = this.props\n        let isProductEditing = this.isEmpty(productEditing)\n        // console.log(productEditing)\n        // console.log(isProductEditing)\n        if (isProductEditing) {\n            this.setState({\n                category: 'Children Literature'\n            })\n        }\n        else {\n            this.setState({\n                _id: productEditing._id,\n                name: productEditing.name,\n                price: productEditing.price,\n                des: productEditing.des,\n                img: productEditing.img,\n                author: productEditing.author,\n                category: productEditing.category\n            })\n        }\n    }\n\n\n    // static getDerivedStateFromProps(nextProps, prevState) {\n    //     console.log(nextProps)\n    //     console.log(prevState)\n    //     const isEmpty = (obj) => {\n    //         for (var key in obj) {\n    //             if (obj.hasOwnProperty(key))\n    //                 return false;\n    //         }\n    //         return true;\n    //     }\n    //     let { productEditing } = nextProps\n    //     // console.log(productEditing)\n    //     if (isEmpty(productEditing)) {\n    //         return prevState\n\n    //     }\n    //     // if(JSON.stringify(productEditing) !== JSON.stringify(prevState)) {\n    //     //     return prevState\n    //     // }\n    //     // if(!isEmpty(productEditing)) {\n    //     //     if(JSON.stringify(productEditing) !== JSON.stringify(prevState)) {\n    //     //         return \n    //     //     }\n    //     // }\n    //     else {\n    //         return {\n    //             _id: productEditing._id,\n    //             name: productEditing.name,\n    //             price: productEditing.price,\n    //             des: productEditing.des,\n    //             img: productEditing.img,\n    //             author: productEditing.author,\n    //             category: productEditing.category\n    //         }\n    //     }\n    // }\n\n\n    render() {\n        let { isOpenFormProduct, productEditing, onCloseFormProduct,isClick } = this.props\n        let {\n            name,\n            price,\n            des,\n            category,\n            author,\n            url_img,\n            img,\n            // isClick,\n            nameErr,\n            priceErr,\n            desErr,\n            categoryErr,\n            authorErr\n        } = this.state\n        const categoryList = [\n            { name: 'Children Literature' },\n            { name: 'Comic Book' },\n            { name: 'Fantasy' },\n            { name: 'Horror' },\n            { name: 'Novel' },\n            { name: 'Romantic' },\n            { name: 'Science Fiction' },\n            { name: 'Thriller' }\n        ];\n        return (\n            <div className={isOpenFormProduct ? \"ProductFuncBackground update-active\" : \"ProductFuncBackground\"}>\n                <Container className={isOpenFormProduct ? \"ProductFunc update-active\" : \"ProductFunc\"}>\n                    <Row style={{\n                        position: \"fixed\",\n                        top: \"0\",\n                        width: \"100%\",\n                        left: \"0\",\n                        right: \"0\",\n                        margin: \"0\",\n                        padding: \"50px 35px 0 70px\",\n                    }}>\n                        <Col className=\"d-flex justify-content-between p-0\">\n                            <h3\n                                className=\"bt-header mb-5\"\n                                style={{ fontSize: \"18px\", color: \"rgb(22,31,106)\" }}\n                            >\n                                {this.isEmpty(productEditing) ? 'Add Product' : 'Update Product'}\n                            </h3>\n                            <FontAwesomeIcon icon={faTimes} onClick={this.handleClick} />\n                        </Col>\n                    </Row>\n                    <Form style={{ height: '100%', overflow: 'scroll' }}>\n                        <Row className=\"mb-5 w-100 m-0\">\n                            <Col xl=\"4\" style={{ padding: \"30px\" }}>\n                                <span className=\"product-title\">Upload your Product image here</span>\n                            </Col>\n                            <Col xl=\"8\" className=\"product-background\">\n                                <FormGroup>\n                                    <Input\n                                        id=\"file\"\n                                        type=\"file\"\n                                        accept=\"image/*\"\n                                        name=\"fileImg\"\n                                        onChange={this.handleImage}\n                                    />\n                                    <Label for=\"file\" className=\"input-wrapper\">\n                                        <FontAwesomeIcon icon={faCloudUploadAlt} size=\"2x\" />\n                                        <span>\n                                            <span>Drag/Upload </span>\n                                            your image here.\n                                        </span>\n                                    </Label>\n                                    {\n                                        img &&\n                                        <div className=\"img-wrapper\">\n                                            <img src={productEditing.img} alt=\"\" />\n                                        </div>\n                                    }\n                                    {\n                                        url_img &&\n                                        <div className=\"img-wrapper\">\n                                            <img src={url_img} alt=\"\" />\n                                        </div>\n                                    }\n\n                                </FormGroup>\n                            </Col>\n                        </Row>\n                        <Row className=\"w-100 m-0\">\n                            <Col xl=\"4\" style={{ padding: \"30px\" }}>\n                                <span className=\"product-title\">\n                                    Add your Product description and necessary information from here\n                                </span>\n                            </Col>\n                            <Col className=\"product-background\">\n                                <FormGroup className=\"update-form\">\n                                    <Label className=\"product-label\" for=\"name\">\n                                        Name\n                                        <span className=\"ml-1 text-danger\">*</span>\n                                    </Label>\n                                    <Input\n                                        autoComplete=\"off\"\n                                        className=\"product-form-control\"\n                                        id=\"name\"\n                                        type=\"text\"\n                                        name=\"name\"\n                                        onChange={this.handleChange}\n                                        // value={productEditing.name ? productEditing.name : name}\n                                        value={name}\n                                    />\n                                    {nameErr && <div className=\"validation\">{nameErr}</div>}\n                                </FormGroup>\n\n                                <FormGroup className=\"update-form\">\n                                    <Label className=\"product-label\" for=\"description\">\n                                        Description\n                                        <span className=\"ml-1 text-danger\">*</span>\n                                    </Label>\n                                    <div>\n                                        <textarea\n                                            // value={productEditing.des ? productEditing.des : des}\n                                            value={des}\n                                            className=\"product-form-control\"\n                                            id=\"description\"\n                                            type=\"text\"\n                                            name=\"des\"\n                                            onChange={this.handleChange}\n                                            autoComplete=\"off\"\n                                        />\n                                    </div>\n                                    {desErr && <div className=\"validation\">{desErr}</div>}\n                                </FormGroup>\n\n                                <FormGroup className=\"update-form\">\n                                    <Label className=\"product-label\" for=\"price\">\n                                        Price\n                                        <span className=\"ml-1 text-danger\">*</span>\n                                    </Label>\n                                    <Input\n                                        autoComplete=\"off\"\n                                        className=\"product-form-control\"\n                                        id=\"price\"\n                                        type=\"number\"\n                                        name=\"price\"\n                                        onChange={this.handleChange}\n                                        // value={productEditing.price ? productEditing.price : price}\n                                        value={price}\n                                    />\n                                    {priceErr && <div className=\"validation\">{priceErr}</div>}\n                                </FormGroup>\n\n                                <FormGroup className=\"update-form\">\n                                    <Label className=\"product-label\" for=\"author\">\n                                        Author\n                                        <span className=\"ml-1 text-danger\">*</span>\n                                    </Label>\n                                    <Input\n                                        autoComplete=\"off\"\n                                        className=\"product-form-control\"\n                                        id=\"author\"\n                                        type=\"text\"\n                                        name=\"author\"\n                                        onChange={this.handleChange}\n                                        // value={productEditing.author ? productEditing.author : author} \n                                        value={author}\n                                    />\n                                    {authorErr && <div className=\"validation\">{authorErr}</div>}\n                                </FormGroup>\n\n                                <FormGroup className=\"update-form\">\n                                    <Label className=\"product-label\" for=\"category\">\n                                        Category\n                                        <span className=\"ml-1 text-danger\">*</span>\n                                    </Label>\n                                    <Input\n                                        autoComplete=\"off\"\n                                        className=\"product-form-control\"\n                                        id=\"category\"\n                                        type=\"select\"\n                                        name=\"category\"\n                                        onChange={this.handleChange}\n                                        value={category}\n                                    // value={productEditing.category ? productEditing.category : category}\n                                    >\n                                        {this.props.category.map(category => <option key={category.name}>{category.name}</option>)}\n                                    </Input>\n                                    {categoryErr && <div className=\"validation\">{categoryErr}</div>}\n                                </FormGroup>\n                            </Col>\n                        </Row>\n                        <Row className=\"update-btn\">\n                            <Col className=\"p-0 cancle-btn w-100\">\n                                <Button className=\"w-100\" onClick={onCloseFormProduct}>Cancel</Button>\n                            </Col>\n                            <Col className=\"p-0 submit-btn w-100\">\n                                <Button className=\"w-100\" type=\"submit\" onClick={this.handleClickCreateOrUpdateProduct}>{this.isEmpty(productEditing) ? 'Create Product' : 'Update Product'}</Button>\n                            </Col>\n                        </Row>\n                    </Form>\n                </Container>\n            </div>\n        )\n    }\n}\n\nexport default ProductFunc"]},"metadata":{},"sourceType":"module"}